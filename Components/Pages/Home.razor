@page "/"
@using Loginapp.Services
@using Blazored.Toast.Services
@inject NavigationManager Navigation
@inject UserSessionService SessionService
@inject IToastService ToastService

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<div class="landing-container">
    <!-- Top Bar -->
    <div class="top-bar d-flex justify-content-between align-items-center px-4 py-2">
        <div class="d-flex align-items-center">
            <div class="dropdown">
                <i class="fas fa-user-circle fa-2x dropdown-toggle cursor-pointer"
                   data-bs-toggle="dropdown" aria-expanded="false"></i>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">Profile</a></li>
                    <li><a class="dropdown-item" href="#">Display</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><hr class="dropdown-divider" /></li>
                    <li><a class="dropdown-item text-danger" href="#" @onclick="Logout">Logout</a></li>
                </ul>
            </div>
            <div class="user-info ms-2">
                <strong>@SessionService.FullName</strong><br />
                <small>@SessionService.Role</small>
            </div>
        </div>

        <div class="d-flex align-items-center">
            <i class="fas fa-search mx-2"></i>
            <i class="fas fa-bell mx-2"></i>
            <img src="images/FFC-logo.png" class="ffc-logo ms-2" alt="FFC Logo" />
        </div>
    </div>

    <!-- Tiles Section -->
    <div class="tiles-background">
        <div class="tiles-wrapper container py-5">
            <div class="row g-4">
                @foreach (var tile in tiles)
                {
                    <div class="col-12 col-sm-6 col-md-4">
                        <div class="tile"
                             style="background-color:@tile.Color;"
                             onmouseover="this.style.boxShadow='0 0 20px 5px ' + '@tile.Color'"
                             onmouseout="this.style.boxShadow='none'">
                            <i class="@tile.Icon tile-icon"></i>
                            <h5 class="mb-0">@tile.Title</h5>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <ContactUs />
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


<!--<h3>Welcome</h3>
<button class="btn btn-primary" @onclick="ShowToast">Test Toast</button>-->

@code {
    private bool _sessionLoaded = false;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && !_sessionLoaded)
        {
            await SessionService.LoadSessionAsync();
            _sessionLoaded = true;
            StateHasChanged();
        }
    }

    protected override void OnInitialized()
    {
        ToastService.ShowSuccess("🎉 Toaster is working!");
    }

    private async Task Logout()
    {
        await SessionService.ClearSessionAsync();
        Navigation.NavigateTo("/login", forceLoad: true);
    }

    private void ShowToast()
    {
        ToastService.ShowSuccess("✅ This is a test toast message!");
    }

    class TileModel
    {
        public string Title { get; set; }
        public string Icon { get; set; }
        public string Color { get; set; }
    }

    List<TileModel> tiles = new()
    {
        new TileModel { Title = "Onboarding", Icon = "fas fa-user-plus", Color = "#4CAF50" },
        new TileModel { Title = "Payroll", Icon = "fas fa-money-check-alt", Color = "#03A9F4" },
        new TileModel { Title = "Appraisals", Icon = "fas fa-chart-line", Color = "#9C27B0" },
        new TileModel { Title = "Training", Icon = "fas fa-chalkboard-teacher", Color = "#FF9800" },
        new TileModel { Title = "Promotions", Icon = "fas fa-bullhorn", Color = "#F44336" },
        new TileModel { Title = "Dealer Network", Icon = "fas fa-network-wired", Color = "#009688" },
        new TileModel { Title = "Market Research", Icon = "fas fa-search", Color = "#3F51B5" },
        new TileModel { Title = "CRM", Icon = "fas fa-address-book", Color = "#8BC34A" },
        new TileModel { Title = "Budgeting", Icon = "fas fa-wallet", Color = "#FF5722" },
        new TileModel { Title = "Invoicing", Icon = "fas fa-file-invoice-dollar", Color = "#673AB7" },
        new TileModel { Title = "Audits", Icon = "fas fa-clipboard-check", Color = "#00BCD4" },
        new TileModel { Title = "Salaries", Icon = "fas fa-hand-holding-usd", Color = "#CDDC39" },
        new TileModel { Title = "Scheduling", Icon = "fas fa-calendar-alt", Color = "#E91E63" },
        new TileModel { Title = "Monitoring", Icon = "fas fa-eye", Color = "#607D8B" },
        new TileModel { Title = "Quality Check", Icon = "fas fa-check-circle", Color = "#795548" },
        new TileModel { Title = "Shift Planning", Icon = "fas fa-tasks", Color = "#FF9800" },
        new TileModel { Title = "Maintenance", Icon = "fas fa-tools", Color = "#2196F3" },
        new TileModel { Title = "Shutdowns", Icon = "fas fa-power-off", Color = "#FF5252" },
        new TileModel { Title = "Troubleshooting", Icon = "fas fa-exclamation-triangle", Color = "#9E9E9E" },
        new TileModel { Title = "Docs & Drawings", Icon = "fas fa-folder-open", Color = "#FF4081" },
        new TileModel { Title = "Procurement", Icon = "fas fa-truck-loading", Color = "#FFB300" },
        new TileModel { Title = "Vendor Management", Icon = "fas fa-users-cog", Color = "#4DD0E1" },
        new TileModel { Title = "Logistics", Icon = "fas fa-shipping-fast", Color = "#A1887F" },
        new TileModel { Title = "Inventory", Icon = "fas fa-boxes", Color = "#AED581" }
    };
}

<style>
    body {
        background-color: #fff;
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
    }

    .landing-container {
        min-height: 100vh;
        overflow-x: hidden;
    }

    .top-bar {
        background-color: #000;
        height: 70px;
        color: #fff;
    }

    .user-info strong, .user-info small {
        color: #fff;
    }

    .ffc-logo {
        width: 100px;
        height: auto;
    }

    .tiles-background {
        background-color: #fff;
        padding: 3rem 0;
    }

    .tile {
        color: white;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        padding: 2rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 15px;
        box-shadow: none;
    }

        .tile:hover {
            transform: translateY(-5px);
        }

    .tile-icon {
        font-size: 30px;
        color: white;
        margin-bottom: 10px;
    }

    .dropdown-menu {
        font-size: 0.9rem;
    }
</style>
